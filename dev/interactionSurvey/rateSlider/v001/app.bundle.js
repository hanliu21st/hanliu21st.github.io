webpackJsonp([0],[function(e,t,n){"use strict";function i(e,t,n,i,l,o){return e>n&&e<l&&t>i&&t<o}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHitRect=i},function(e,t,n){"use strict";function i(){console.log("-------document is ready-------"),M.config=new p.JSONLoader,M.canvas=new b.CanvasObj("myCanvas"),M.stage=new createjs.Stage(M.canvas.id),M.pointer=new b.PointerObj,M.interface.root=document.getElementById("myInterface"),new k.DOMintObj(M).main();var e=new v.RowLayer(M),t=new m.Sliderayer(M);M.userInput=new y.UserInput(M),M.interfaceReposition=new x.RepositionObj(M),document.addEventListener("mousedown",l,!1),document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",r,!1),document.addEventListener("touchstart",a,!1),document.addEventListener("touchmove",s,!1),document.addEventListener("touchend",h,!1),M.interface.questionShowButton.addEventListener("touchstart",toggleQuestion,!1),M.interface.questionSubmitButton.addEventListener("mousedown",u,!1),M.interface.questionSubmitButton.addEventListener("touchstart",u,!1),M.canvas.reSizeFullScreen(),M.config.url="https://raw.githubusercontent.com/hanliu21st/pubassets/master/dev/hl2d/vic_hl2d/201709/json/app_conf.json",(0,w.jsonLoading)(M.config),M.looping=setInterval(function(){1==M.config.complete&&0==M.config.callBackFired&&(c(),M.config.callBackFired=!0),(0,p.checkImgaLoaded)(M.rowImgs)&&0==M.status.rowLoaded&&(M.status.rowLoaded=!0,console.log("row images are loaded"),t.main(),e.main()),(0,p.checkImgaLoaded)(M.spriteImgs)&&0==M.status.spriteLoaded&&(M.status.spriteLoaded=!0,console.log("sprite images are loaded")),d()},30)}function l(e){M.pointer.touchON=!1,M.pointer.pointCount=1,M.pointer.pointMode="single-hold",M.pointer.at._0._x=Math.floor(e.pageX-M.canvas.left),M.pointer.at._0._y=Math.floor(e.pageY-M.canvas.top)}function o(e){M.pointer.touchON=!1,M.pointer.pointCount=1,"single-hold"==M.pointer.pointMode?(M.pointer.at._0._x=Math.floor(e.pageX-M.canvas.left),M.pointer.at._0._y=Math.floor(e.pageY-M.canvas.top)):(M.pointer.pointMode="release",M.pointer.reset())}function r(e){M.pointer.touchON=!1,M.pointer.pointCount=0,M.pointer.pointMode="release",M.pointer.reset()}function a(e){e.preventDefault(),M.pointer.touchON=!0,1==e.touches.length?(M.pointer.pointCount=1,M.pointer.pointMode="single-hold",M.pointer.at._0._x=Math.floor(e.targetTouches[0].pageX-M.canvas.left),M.pointer.at._0._y=Math.floor(e.targetTouches[0].pageY-M.canvas.top)):(M.pointer.pointMode="release",M.pointer.reset())}function s(e){e.preventDefault(),M.pointer.touchON=!0,1==e.touches.length?(M.pointer.pointCount=1,"single-hold"==M.pointer.pointMode?(M.pointer.at._0._x=Math.floor(e.targetTouches[0].pageX-M.canvas.left),M.pointer.at._0._y=Math.floor(e.targetTouches[0].pageY-M.canvas.top)):(M.pointer.pointMode="release",M.pointer.reset())):(M.pointer.pointMode="release",M.pointer.reset())}function h(e){e.preventDefault(),M.pointer.touchON=!0,M.pointer.pointMode="release",M.pointer.reset()}function c(){console.log("---app Main jason is lodeded---"),console.log("---mian JSON---start"),console.log(M.config.json),console.log("---mian JSON---end");for(var e=0;e<M.config.json.row_img.pathes.length;e++){var t=new p.IMGLoader;t.url=M.config.json.row_img.path_prefix+M.config.json.row_img.pathes[e],t.id=M.config.json.row_img.ids[e],M.rowImgs.push(t),(0,w.imgLoading)(t)}var n=new p.IMGLoader;n.url=M.config.json.asset_hi_img_path[0],n.id=M.config.json.asset_hi_ids[0],M.spriteImgs.push(n),(0,w.imgLoading)(n)}function u(){console.log("submit answears"),g()}function g(){console.log("logic to produce output string");var e=M.rowElement_onBar.length;M.rows.result="";for(var t=0;t<e;t++)M.rows.result=M.rows.result+M.rowElement_onBar[t].valS,M.rows.result=t==e-1?M.rows.result+"|":M.rows.result+",";for(var n=0;n<e;n++)-1!=M.rows.rateIndex.indexOf(n)?M.rows.result=M.rows.result+(M.rows.rateIndex.indexOf(n)+1):M.rows.result=M.rows.result+-999,n==e-1||(M.rows.result=M.rows.result+",");console.log("answer: "+M.rows.result)}function d(){(0,f.browserStageChanged)({a_recordSize:M.canvas.recordStageSize})&&(M.canvas.reSizeFullScreen(),M.interfaceReposition.main()),M.pointer.inTheStage=(0,_.checkHitRect)(M.pointer.at._0._x,M.pointer.at._0._y,0,0,M.canvas.width,M.canvas.height),M.userInput.main(),M.stage.update()}var f=n(2),b=n(3),p=n(4),w=n(5),_=n(0),v=n(6),m=n(7),y=n(8),x=n(9),k=n(10);n(11),document.addEventListener("DOMContentLoaded",i);var M={canvasStage:null,pressed:!1,testing:!0,config:null,canvas:null,stage:null,pointer:null,looping:null,status:{rowLoaded:!1,brandLoaded:!1,spriteLoaded:!1},rowElement_onBar:[],colElement_onBar:[],rowBar:null,currentTarget:null,currentTargetParent:null,rowLayer:null,interface:{quetionText:"\n            <div>\n                Question text here, \n                <b>This</b> is an interaction question.\n            </div><br/>\n        ",commentText:'\n            <div>\n                Please drag brands to the scale.\n                Click <b>"Q"</b> to dismiss question instruction.\n            </div>\n        ',submitButtonText:"\n            submit\n        ",root:null,questionLayer:null,questionShowButton:null,questionSubmitButton:null,dummyLayer:null},rows:{order:[3,2,5,7,9,0,4,1,6,8],filter:[1,0,1,0,1,0,0,1,1,1],remain:[],rateIndex:[],result:"",rateYSpace:150,text:["b1","b2","b3","b4","b5","b6\ny","b7","b8","b9","b10"],textFormat:"12px Arial",textColor:"#000000",top:100,rowWidth:100,gapX:10,gapY:20},slider:{widthRatio:.9,top:270,el:null,leftText:"",rightText:"",centerText:"",width:0,height:0,el_out:{el:null,graphics:null,color:"DeepSkyBlue",height:12},el_in:{el:null,graphics:null,color:"#ffffff",height:4},el_left:{el:null,text:"Bad\n",color:"#000000",top:16},el_right:{el:null,text:"Good\n",color:"#000000",top:16},el_center:{el:null,text:"-|-",color:"#000000",top:16}},userInput:null,interfaceReposition:null,rowImgs:[],spriteImgs:[],brandImgs:[]}},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.a_recordSize,n=void 0===t?[0,0]:t;return(n[0]!=window.innerWidth||n[1]!=window.innerHeight)&&(n[0]=window.innerWidth,n[1]=window.innerHeight,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.browserStageChanged=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_x:0,_y:0},t=arguments[1],n=0,i=0,l=t;l;){if("BODY"==l.tagName){var o=l.scrollLeft||document.documentElement.scrollLeft,r=l.scrollTop||document.documentElement.scrollTop;n+=l.offsetLeft-o+l.clientLeft,i+=l.offsetTop-r+l.clientTop}else n+=l.offsetLeft-l.scrollLeft+l.clientLeft,i+=l.offsetTop-l.scrollTop+l.clientTop;l=l.offsetParent}return e._x=n,e._y=i,e}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"myCanvas",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i(this,e),this._description="class for canvas stage",this._element=document.getElementById(t),this._id=t,this._recordStageSize=[window.innerWidth,window.innerHeight],this._percent=[n,l],this._stageWidth=Math.ceil(window.innerWidth*n),this._stageHeight=Math.ceil(window.innerHeight*l),this._domPosition={_x:0,_y:0},this._dummy}return o(e,[{key:"reSizeFullScreen",value:function(){this._stageWidth=window.innerWidth-4,this._stageHeight=window.innerHeight-4,this._element.setAttribute("width",this._stageWidth+"px"),this._element.setAttribute("height",this._stageHeight+"px"),this._element.style.position="absolute",this._element.style.left="2px",this._element.style.top="2px",this._element.style.zIndex="1",this._domPosition=l({_x:0,_y:0},this._element)}},{key:"reSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.ceil(window.innerWidth*this._percent[0]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.ceil(window.innerHeight*this._percent[1]);e>=window.innerWidth?this._stageWidth=window.innerWidth-4:this._stageWidth=e,t>=window.innerHeight?this._stageHeight=window.innerHeight-4:this._stageHeight=t,this._element.style.cssText="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none; -o-user-select:none",this._element.setAttribute("width",this._stageWidth+"px"),this._element.setAttribute("height",this._stageHeight+"px"),this._element.style.position="absolute",this._element.style.position="fixed",this._element.style.left=Math.ceil((window.innerWidth-this._stageWidth)/2)+"px",this._element.style.top=Math.ceil((window.innerHeight-this._stageHeight)/2)+"px"}},{key:"id",get:function(){return this._id}},{key:"left",get:function(){return this._domPosition._x}},{key:"top",get:function(){return this._domPosition._y}},{key:"recordStageSize",get:function(){return this._recordStageSize}},{key:"width",get:function(){return this._stageWidth},set:function(e){isNaN(e)&&(this._stageWidth=Math.ceil(e))}},{key:"height",get:function(){return this._stageHeight},set:function(e){isNaN(e)&&(this._stageHeight=Math.ceil(e))}},{key:"percentage",get:function(){return this._percent},set:function(e){if(!(isNaN(e[0])&&isNaN(e[1])&&e[0]>0&&e[1]>0&&e[0]<=1&&e[1]<=1))throw new Error("a array with 2 numbers is required");this._percent=e}},{key:"stage",get:function(){return this._element},set:function(e){if(!("string"==typeof e&&e.length>=1))throw new Error("a string name is required for retring new canvas element");this._element=document.getElementById(e),this._id=e}},{key:"globalPosition",get:function(){return this._domPosition}}]),e}(),a=function(){function e(){i(this,e),this._description="class for unifying mouse and touch pointer",this._touchON=!1,this._pointerCount=0,this._pointerMode="release",this._inTheStage=!1,this._status={_0:{_x:0,_y:0},_1:{_x:0,_y:0},_2:{_x:0,_y:0},_3:{_x:0,_y:0},_4:{_x:0,_y:0},_5:{_x:0,_y:0},_6:{_x:0,_y:0},_7:{_x:0,_y:0},_8:{_x:0,_y:0},_9:{_x:0,_y:0}}}return o(e,[{key:"reset",value:function(){this._pointerCount=0,this._pointerMode="release";for(var e in this._status)this._status[e]._x=-9999,this._status[e]._y=-9999}},{key:"touchON",get:function(){return this._touchON},set:function(e){if("boolean"!=typeof e)throw new Error("a boolean is required for setting touchOn");this._touchON=e}},{key:"pointCount",get:function(){return this._pointerCount},set:function(e){this._pointerCount=e}},{key:"pointMode",get:function(){return this._pointerMode},set:function(e){this._pointerMode=e}},{key:"inTheStage",get:function(){return this._inTheStage},set:function(e){return this._inTheStage=e}},{key:"at",get:function(){return this._status}}]),e}();t.CanvasObj=r,t.PointerObj=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){if(e.length>0){for(var t=0;t<e.length;t++)if(0==e[t].complete)return!1;return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this._complete=!1,this._url=null,this._json=null,this._callBackFired=!1}return o(e,[{key:"complete",get:function(){return this._complete},set:function(e){this._complete=e}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"json",get:function(){return this._json},set:function(e){this._json=e}},{key:"callBackFired",get:function(){return this._callBackFired},set:function(e){this._callBackFired=e}}]),e}(),a=function(){function e(){i(this,e),this._complete=!1,this._url=null,this._img=null,this._id=null,this._callBackFired=!1}return o(e,[{key:"complete",get:function(){return this._complete},set:function(e){this._complete=e}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"img",get:function(){return this._img},set:function(e){this._img=e}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"callBackFired",get:function(){return this._callBackFired},set:function(e){this._callBackFired=e}}]),e}();t.IMGLoader=a,t.JSONLoader=r,t.checkImgaLoaded=l},function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise(function(n,i){var l=new XMLHttpRequest;l.open("GET",e),l.responseType=t,l.onload=function(){200===l.status?n("text"==t?l.responseText:"blob"==t?l.response:l.response):i(Error(t+" didn't load successfully; error code:"+l.statusText))},l.onerror=function(){i(Error("There was a network error."))},l.send()})}function l(e){i(e.url,"text").then(function(t){e.json=JSON.parse(t),e.complete=!0},function(e){console.log(e)})}function o(e){var t=document.createElement("img");i(e.url,"blob").then(function(n){var i=window.URL.createObjectURL(n);t.src=i,t.id=e.id,e.img=t,e.complete=!0},function(e){console.log(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.promiseLoad=i,t.jsonLoading=l,t.imgLoading=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.global=t}return l(e,[{key:"main",value:function(){this.careteRows()}},{key:"careteRows",value:function(){var e=this;this.global.rowBar=new createjs.Container;this.global.rows.remain=[],console.log("old: "+this.global.rows.order),console.log("new: "+this.global.rows.remain),this.global.rowImgs.forEach(function(t,n){1==e.global.rows.filter[e.global.rows.order[n]]&&e.global.rows.remain.push(e.global.rows.order[n])}),console.log("old: "+this.global.rows.order),console.log("new: "+this.global.rows.remain),this.global.rowImgs.forEach(function(t,n){var i=new createjs.Container,l=!1,o=-999,r=null;-1!=e.global.rows.remain.indexOf(n)?(i.x=100+(e.global.rows.rowWidth+e.global.rows.gapX)*e.global.rows.remain.indexOf(n),l=!0,o=null,r=i.x):i.x=-9999,i.visible=l,i.y=50;var a=(new createjs.Graphics).beginFill("#ff0000").drawRect(0,0,2,2),s=new createjs.Shape(a);i.addChild(s);var h=new createjs.Shape;h.graphics.beginFill("DeepSkyBlue").drawCircle(0,0,50),h.x=0,h.y=0,i.addChild(h);var c=new createjs.Shape;c.graphics.beginFill("#ddd").drawCircle(0,0,40),c.x=0,c.y=0,i.addChild(c);var u=new createjs.Bitmap(t.img);u.scaleX=.8,u.scaleY=.8,u.x=-40,u.y=-40,i.addChild(u);var g=new createjs.Text(e.global.rows.text[n],e.global.rows.textFormat,e.global.rows.textColor);g.textAlign="center",g.x=0,g.y=50,g.textBaseline="alphabetic",i.addChild(g);var d=new createjs.Text(" ","22px Arial","#ff0000");d.textAlign="center",d.x=0,d.y=-50,d.textBaseline="alphabetic",i.addChild(d),e.global.rowBar.addChild(i);var f={el:i,graphics:a,width:Math.ceil(98),height:Math.ceil(98),valS:o,valT:"",el_val:d,xFix:r,visible:l};e.global.rowElement_onBar.push(f)}),this.global.rowBar.x=0,this.global.rowBar.y=0,this.global.stage.addChild(this.global.rowBar),this.global.stage.update(),this.global.currentTarget=null}}]),e}();t.RowLayer=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.global=t}return l(e,[{key:"main",value:function(){this.createSliders()}},{key:"createSliders",value:function(){console.log("hello - slider"),this.global.slider.width=Math.ceil(this.global.canvas.width*this.global.slider.widthRatio);var e=new createjs.Container,t=(new createjs.Graphics).beginFill(this.global.slider.el_out.color).drawRect(Math.ceil((this.global.canvas.width-this.global.slider.width)/2),this.global.slider.top,this.global.slider.width,this.global.slider.el_out.height),n=new createjs.Shape(t);e.addChild(n);var i=(new createjs.Graphics).beginFill(this.global.slider.el_in.color).drawRect(Math.ceil((this.global.canvas.width-this.global.slider.width)/2),this.global.slider.top+Math.ceil((this.global.slider.el_out.height-this.global.slider.el_in.height)/2),this.global.slider.width,this.global.slider.el_in.height),l=new createjs.Shape(i);e.addChild(l);var o=new createjs.Text(this.global.slider.el_left.text,this.global.rows.textFormat,this.global.rows.textColor);o.textAlign="left",o.x=Math.ceil((this.global.canvas.width-this.global.slider.width)/2),o.y=this.global.slider.top+this.global.slider.el_out.height+this.global.slider.el_left.top,o.textBaseline="alphabetic",e.addChild(o);var r=new createjs.Text(this.global.slider.el_right.text,this.global.rows.textFormat,this.global.rows.textColor);r.textAlign="right",r.x=o.x+this.global.slider.width,r.y=this.global.slider.top+this.global.slider.el_out.height+this.global.slider.el_right.top,r.textBaseline="alphabetic",e.addChild(r);var a=new createjs.Text(this.global.slider.el_center.text,this.global.rows.textFormat,this.global.rows.textColor);a.textAlign="center",a.x=Math.ceil(this.global.canvas.width/2),a.y=this.global.slider.top+this.global.slider.el_out.height+this.global.slider.el_center.top,a.textBaseline="alphabetic",e.addChild(a),e.x=0,e.y=0,this.global.stage.addChild(e),this.global.stage.update(),this.global.slider.el=e,this.global.slider.el_out.el=n,this.global.slider.el_out.graphics=t,this.global.slider.el_in.el=l,this.global.slider.el_in.graphics=i,this.global.slider.el_left.el=o,this.global.slider.el_right.el=r,this.global.slider.el_center.el=a}}]),e}();t.Sliderayer=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UserInput=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=(n(0),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.global=t}return l(e,[{key:"main",value:function(){this.rowRemainRest(),this.targetRest(),this.rowInteraction(),this.resultCHecking(),this.global.testing}},{key:"resultCHecking",value:function(){this.global.rows.remain.length>=1?this.global.interface.questionSubmitButton.style.display="none":this.global.interface.questionSubmitButton.style.display="inline"}},{key:"rowInteraction",value:function(){1==this.global.status.rowLoaded&&null!=this.global.currentTarget&&-1!=this.global.rowElement_onBar.indexOf(this.global.currentTarget)&&this.global.pointer.inTheStage&&(this.global.currentTarget.el.x=this.global.pointer.at._0._x,this.global.currentTarget.el.y=this.global.pointer.at._0._y,this.calculateVal(this.global.currentTarget),this.global.currentTarget.el_val.text=this.global.currentTarget.valS,this.global.currentTarget.graphics.clear().beginFill("DeepSkyBlue").drawRect(0,0,2,Math.ceil(this.global.slider.top-this.global.pointer.at._0._y)))}},{key:"targetRest",value:function(){"single-hold"==this.global.pointer.pointMode&&0==this.global.pressed?(this.global.pressed=!0,this.hitTestRow()):"single-hold"==this.global.pointer.pointMode&&1==this.global.pressed||("release"==this.global.pointer.pointMode?(this.rowReleased(),this.global.pressed=!1,this.global.currentTarget=null):this.global.currentTarget=null)}},{key:"rowRemainRest",value:function(){var e=this;this.global.rows.remain.length>=1&&this.global.rowElement_onBar.forEach(function(t,n){-1!=e.global.rows.remain.indexOf(n)&&-999!=e.global.rowElement_onBar[n].valS&&null!=e.global.rowElement_onBar[n].valS&&(e.global.rows.remain.splice(e.global.rows.remain.indexOf(n),1),e.global.rows.remain.forEach(function(t,n){e.global.rowElement_onBar[t].el.x=100+(e.global.rows.rowWidth+e.global.rows.gapX)*n}))})}},{key:"hitTestRow",value:function(){var e=this;null==this.global.currentTarget&&this.global.rowElement_onBar.forEach(function(t,n){if(e.global.pointer.at._0._x>=t.el.x-t.width/2&&e.global.pointer.at._0._x<=t.el.x+t.width/2&&e.global.pointer.at._0._y>=t.el.y-t.height/2&&e.global.pointer.at._0._y<=t.el.y+t.height/2)return e.global.currentTarget=t,t.el.scaleX=1,t.el.scaleY=1,e.global.currentTargetParent=t.el.parent,e.global.currentTargetParent.removeChildAt(e.global.currentTargetParent.getChildIndex(t.el)),e.global.currentTargetParent.addChild(t.el),e.global.currentTargetParent=null,e.calculateVal(t),e.global.rowElement_onBar.forEach(function(e,t){t==n||-999!=e.valS&&null!=e.valS&&(e.el.scaleX=.5,e.el.scaleY=.5,e.width=48,e.height=48)}),!0})}},{key:"rowReleased",value:function(){-1!=this.global.rowElement_onBar.indexOf(this.global.currentTarget)&&(this.global.currentTarget.el.scaleX=.5,this.global.currentTarget.el.scaleY=.5,this.global.currentTarget.width=48,this.global.currentTarget.height=48,this.calculateVal(this.global.currentTarget),this.repostValuedRow(),this.global.currentTarget=null)}},{key:"calculateVal",value:function(e){var t=1,n=e.el.x-Math.ceil((this.global.canvas.width-this.global.slider.width)/2);e.graphics.clear().beginFill("#ff0000").drawRect(0,0,2,2),n<=0?n=0:n>=this.global.slider.width&&(n=this.global.slider.width),t=(n/this.global.slider.width).toFixed(2),e.valS=t}},{key:"repostValuedRow",value:function(){var e=this;this.global.rows.rateIndex=[];var t=[],n=[];this.global.rowElement_onBar.forEach(function(i,l){-999!=i.valS&&null!=i.valS&&(i.el.x=Math.ceil((e.global.canvas.width-e.global.slider.width)/2)+Math.ceil(e.global.slider.width*i.valS),t.push(l),n.push(i.valS))});for(var i=0,l=0;l<t.length;l++){var o=n[l],r=t[l];i=l;for(var a=0;a<t.length;a++)o<=n[a]&&(o=n[a],r=t[a],i=a);n[i]=-999,this.global.rows.rateIndex.push(r)}var s=Math.ceil(this.global.rows.rateYSpace/this.global.rows.rateIndex.length);this.global.rows.rateIndex.forEach(function(t,n){e.global.rowElement_onBar[t].el.y=e.global.slider.top-s*(e.global.rows.rateIndex.length-n)})}}]),e}());t.UserInput=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.global=t}return l(e,[{key:"main",value:function(){this.sliderRep(),this.repostValuedRowWhenStageResized(),this.myFunction()}},{key:"sliderRep",value:function(){this.global.slider.width=Math.ceil(this.global.canvas.width*this.global.slider.widthRatio),this.global.slider.el_out.graphics.clear().beginFill(this.global.slider.el_out.color).drawRect(Math.ceil((this.global.canvas.width-this.global.slider.width)/2),this.global.slider.top,this.global.slider.width,this.global.slider.el_out.height),this.global.slider.el_in.graphics.clear().beginFill(this.global.slider.el_in.color).drawRect(Math.ceil((this.global.canvas.width-this.global.slider.width)/2),this.global.slider.top+Math.ceil((this.global.slider.el_out.height-this.global.slider.el_in.height)/2),this.global.slider.width,this.global.slider.el_in.height),this.global.slider.el_left.el.x=Math.ceil((this.global.canvas.width-this.global.slider.width)/2),this.global.slider.el_right.el.x=this.global.slider.el_left.el.x+this.global.slider.width,this.global.slider.el_center.el.x=Math.ceil(this.global.canvas.width/2)}},{key:"repostValuedRowWhenStageResized",value:function(){var e=this;this.global.rows.rateIndex=[];var t=[],n=[];this.global.rowElement_onBar.forEach(function(i,l){-999!=i.valS&&null!=i.valS&&(i.el.x=Math.ceil((e.global.canvas.width-e.global.slider.width)/2)+Math.ceil(e.global.slider.width*i.valS),t.push(l),n.push(i.valS))});for(var i=0,l=0;l<t.length;l++){var o=n[l],r=t[l];i=l;for(var a=0;a<t.length;a++)o<=n[a]&&(o=n[a],r=t[a],i=a);n[i]=-999,this.global.rows.rateIndex.push(r)}var s=Math.ceil(this.global.rows.rateYSpace/this.global.rows.rateIndex.length);this.global.rows.rateIndex.forEach(function(t,n){e.global.rowElement_onBar[t].el.y=e.global.slider.top-s*(e.global.rows.rateIndex.length-n)})}},{key:"myFunction",value:function(){}}]),e}();t.RepositionObj=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.global=t}return l(e,[{key:"main",value:function(){this.createDOMint()}},{key:"createDOMint",value:function(){console.log("DOM int works"),this.createScript(),this.createQuestionLayer(),this.createQuestionShowButton(),this.createSubmitButton()}},{key:"createQuestionLayer",value:function(){var e=document.createElement("div");e.setAttribute("id","survey_question"),e.setAttribute("class","survetQuestion"),this.global.interface.root.appendChild(e),e.style.position="absolute",e.style.zIndex="9",this.global.interface.questionLayer=e;var t=document.createElement("div");t.innerHTML=this.global.interface.quetionText;var n=document.createElement("div");n.innerHTML=this.global.interface.commentText,e.appendChild(t),e.appendChild(n)}},{key:"createQuestionShowButton",value:function(){var e=document.createElement("div");e.setAttribute("id","survey_question_show"),this.global.interface.root.appendChild(e),e.innerHTML="\n            <div \n                class=\"questionShowButton\"\n                onclick='toggleQuestion()'\n            >Q</div>\n        ",e.style.color="#000000",e.style.position="absolute",e.style.zIndex="999",e.style.left="1px",e.style.top="1px",this.global.interface.questionShowButton=e}},{key:"createSubmitButton",value:function(){var e=document.createElement("button");e.setAttribute("id","survey_submit"),e.classList.add("btn","btn-primary"),this.global.interface.root.appendChild(e),e.innerHTML=this.global.interface.submitButtonText,e.style.position="absolute",e.style.zIndex="998",e.style.left="85%",this.global.interface.questionSubmitButton=e}},{key:"createScript",value:function(){var e=document.createElement("script");e.innerHTML='\n            // function to show or hide survey question text\n            function toggleQuestion(){\n                var el = document.getElementById("survey_question");\n                // if(event){\n                //     console.log(event);\n                // }\n                if(el){\n                    //console.log(el);\n                    if(el.style.display == "none"){\n                        el.style.display = "inline";\n                    }else if(el.style.display == "inline"){\n                        el.style.display = "none";\n                    }else{\n                        el.style.display = "inline";\n                    }\n                }\n            }\n        ',document.getElementsByTagName("head")[0].appendChild(e)}}]),e}();t.DOMintObj=o},function(e,t){}],[1]);